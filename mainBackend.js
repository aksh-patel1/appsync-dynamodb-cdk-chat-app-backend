#!/usr/bin/env node
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
require("source-map-support/register");
const cdk = require("aws-cdk-lib");
const authStack_1 = require("../lib/authStack");
const fileStorageStack_1 = require("../lib/fileStorageStack");
const databaseStack_1 = require("../lib/databaseStack");
const apiStack_1 = require("../lib/apiStack");
const app = new cdk.App();
const databaseStack = new databaseStack_1.DatabaseStack(app, 'DatabaseStack', {});
const authStack = new authStack_1.AuthStack(app, 'AuthStack', {
    stage: 'dev',
    hasCognitoGroups: true,
    groupNames: ['admin'],
    userpoolConstructName: 'ChatUserPool',
    identitypoolConstructName: 'ChatIdentityPool',
    userTable: databaseStack.userTable,
});
const fileStorageStack = new fileStorageStack_1.FileStorageStack(app, 'FileStorageStack', {
    authenticatedRole: authStack.authenticatedRole,
    unauthenticatedRole: authStack.unauthenticatedRole,
    allowedOrigins: ['http://localhost:3000'],
});
const apiStack = new apiStack_1.APIStack(app, 'AppSyncAPIStack', {
    userpool: authStack.userpool,
    roomTable: databaseStack.roomTable,
    messageTable: databaseStack.messageTable,
    userTable: databaseStack.userTable,
    unauthenticatedRole: authStack.unauthenticatedRole,
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbkJhY2tlbmQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJtYWluQmFja2VuZC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFDQSx1Q0FBb0M7QUFDcEMsbUNBQWtDO0FBQ2xDLGdEQUE0QztBQUM1Qyw4REFBMEQ7QUFDMUQsd0RBQW9EO0FBQ3BELDhDQUEwQztBQUUxQyxNQUFNLEdBQUcsR0FBRyxJQUFJLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQTtBQUV6QixNQUFNLGFBQWEsR0FBRyxJQUFJLDZCQUFhLENBQUMsR0FBRyxFQUFFLGVBQWUsRUFBRSxFQUFFLENBQUMsQ0FBQTtBQUVqRSxNQUFNLFNBQVMsR0FBRyxJQUFJLHFCQUFTLENBQUMsR0FBRyxFQUFFLFdBQVcsRUFBRTtJQUNqRCxLQUFLLEVBQUUsS0FBSztJQUNaLGdCQUFnQixFQUFFLElBQUk7SUFDdEIsVUFBVSxFQUFFLENBQUMsT0FBTyxDQUFDO0lBQ3JCLHFCQUFxQixFQUFFLGNBQWM7SUFDckMseUJBQXlCLEVBQUUsa0JBQWtCO0lBQzdDLFNBQVMsRUFBRSxhQUFhLENBQUMsU0FBUztDQUNsQyxDQUFDLENBQUE7QUFFRixNQUFNLGdCQUFnQixHQUFHLElBQUksbUNBQWdCLENBQUMsR0FBRyxFQUFFLGtCQUFrQixFQUFFO0lBQ3RFLGlCQUFpQixFQUFFLFNBQVMsQ0FBQyxpQkFBaUI7SUFDOUMsbUJBQW1CLEVBQUUsU0FBUyxDQUFDLG1CQUFtQjtJQUNsRCxjQUFjLEVBQUUsQ0FBQyx1QkFBdUIsQ0FBQztDQUN6QyxDQUFDLENBQUE7QUFFRixNQUFNLFFBQVEsR0FBRyxJQUFJLG1CQUFRLENBQUMsR0FBRyxFQUFFLGlCQUFpQixFQUFFO0lBQ3JELFFBQVEsRUFBRSxTQUFTLENBQUMsUUFBUTtJQUM1QixTQUFTLEVBQUUsYUFBYSxDQUFDLFNBQVM7SUFDbEMsWUFBWSxFQUFFLGFBQWEsQ0FBQyxZQUFZO0lBQ3hDLFNBQVMsRUFBRSxhQUFhLENBQUMsU0FBUztJQUNsQyxtQkFBbUIsRUFBRSxTQUFTLENBQUMsbUJBQW1CO0NBQ2xELENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIiMhL3Vzci9iaW4vZW52IG5vZGVcclxuaW1wb3J0ICdzb3VyY2UtbWFwLXN1cHBvcnQvcmVnaXN0ZXInXHJcbmltcG9ydCAqIGFzIGNkayBmcm9tICdhd3MtY2RrLWxpYidcclxuaW1wb3J0IHsgQXV0aFN0YWNrIH0gZnJvbSAnLi4vbGliL2F1dGhTdGFjaydcclxuaW1wb3J0IHsgRmlsZVN0b3JhZ2VTdGFjayB9IGZyb20gJy4uL2xpYi9maWxlU3RvcmFnZVN0YWNrJ1xyXG5pbXBvcnQgeyBEYXRhYmFzZVN0YWNrIH0gZnJvbSAnLi4vbGliL2RhdGFiYXNlU3RhY2snXHJcbmltcG9ydCB7IEFQSVN0YWNrIH0gZnJvbSAnLi4vbGliL2FwaVN0YWNrJ1xyXG5cclxuY29uc3QgYXBwID0gbmV3IGNkay5BcHAoKVxyXG5cclxuY29uc3QgZGF0YWJhc2VTdGFjayA9IG5ldyBEYXRhYmFzZVN0YWNrKGFwcCwgJ0RhdGFiYXNlU3RhY2snLCB7fSlcclxuXHJcbmNvbnN0IGF1dGhTdGFjayA9IG5ldyBBdXRoU3RhY2soYXBwLCAnQXV0aFN0YWNrJywge1xyXG5cdHN0YWdlOiAnZGV2JyxcclxuXHRoYXNDb2duaXRvR3JvdXBzOiB0cnVlLFxyXG5cdGdyb3VwTmFtZXM6IFsnYWRtaW4nXSxcclxuXHR1c2VycG9vbENvbnN0cnVjdE5hbWU6ICdDaGF0VXNlclBvb2wnLFxyXG5cdGlkZW50aXR5cG9vbENvbnN0cnVjdE5hbWU6ICdDaGF0SWRlbnRpdHlQb29sJyxcclxuXHR1c2VyVGFibGU6IGRhdGFiYXNlU3RhY2sudXNlclRhYmxlLFxyXG59KVxyXG5cclxuY29uc3QgZmlsZVN0b3JhZ2VTdGFjayA9IG5ldyBGaWxlU3RvcmFnZVN0YWNrKGFwcCwgJ0ZpbGVTdG9yYWdlU3RhY2snLCB7XHJcblx0YXV0aGVudGljYXRlZFJvbGU6IGF1dGhTdGFjay5hdXRoZW50aWNhdGVkUm9sZSxcclxuXHR1bmF1dGhlbnRpY2F0ZWRSb2xlOiBhdXRoU3RhY2sudW5hdXRoZW50aWNhdGVkUm9sZSxcclxuXHRhbGxvd2VkT3JpZ2luczogWydodHRwOi8vbG9jYWxob3N0OjMwMDAnXSxcclxufSlcclxuXHJcbmNvbnN0IGFwaVN0YWNrID0gbmV3IEFQSVN0YWNrKGFwcCwgJ0FwcFN5bmNBUElTdGFjaycsIHtcclxuXHR1c2VycG9vbDogYXV0aFN0YWNrLnVzZXJwb29sLFxyXG5cdHJvb21UYWJsZTogZGF0YWJhc2VTdGFjay5yb29tVGFibGUsXHJcblx0bWVzc2FnZVRhYmxlOiBkYXRhYmFzZVN0YWNrLm1lc3NhZ2VUYWJsZSxcclxuXHR1c2VyVGFibGU6IGRhdGFiYXNlU3RhY2sudXNlclRhYmxlLFxyXG5cdHVuYXV0aGVudGljYXRlZFJvbGU6IGF1dGhTdGFjay51bmF1dGhlbnRpY2F0ZWRSb2xlLFxyXG59KVxyXG4iXX0=